/** *	@workflow FormSubmit *	@desc Submits form using ajax or iframe and loads template with response data into div.status in form * *	@param sel form-parent selector string *	@param loadmsg string [message] optional default (FireSpark.core.constant.loadmsg) *	@param tpl string [message|memory] *	@param cf boolean [message] optional default false *	@param iframe boolean [message] optional default false *	@param ec string [message] optional default false ***/FireSpark.jquery.workflow.FormSubmit = {	run : function(message, memory){		if(message.iframe || false){			var loader = FireSpark.jquery.service.LoadIframe;		}		else {			var loader = FireSpark.jquery.service.LoadAjax;		}				return FireSpark.Kernel.run([{			service : FireSpark.jquery.service.FormValidate,			form : message.sel + ' form'		},{			service : FireSpark.jquery.service.FormRead,			form : message.sel + ' form'		},{			service : FireSpark.jquery.workflow.LoadTemplate,			loader : loader,			agent : message.sel + ' form',			encode : message.ec || false,			element : message.sel +' div.status',			selector : message.sel + ' input[name=submit]',			template : message.tpl || false,			confirm : message.cf || false,			loadmsg : message.loadmsg || false		}], memory);	}};